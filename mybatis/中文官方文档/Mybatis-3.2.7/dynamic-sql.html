
<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 05 六月 2014 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Clinton Begin" />
    <meta name="author" content="Nan Lei" />
    <meta name="Date-Revision-yyyymmdd" content="20140605" />
    <meta http-equiv="Content-Language" content="zh" />
    <title>MyBatis - 
    MyBatis 3 | 动态 SQL</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>MyBatis</h2>
                </div>
                      </div>
        <div class="pull-right">                                <a href="../../" id="bannerRight" title="MyBatis logo">
                                                                                        <img src="./images/mybatis-logo.png"  alt="MyBatis logo"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">最近更新: 05 六月 2014
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">版本: 3.2.7
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Core</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="getting-started.html" title="入门">
          <i class="none"></i>
        入门</a>
            </li>
                                                                                                                                                                                                                  
      <li>
  
                          <a href="configuration.html" title="XML 映射配置文件">
          <i class="icon-chevron-right"></i>
        XML 映射配置文件</a>
                  </li>
                                                                                                                                                            
      <li>
  
                          <a href="sqlmap-xml.html" title="Mapper XML 文件">
          <i class="icon-chevron-right"></i>
        Mapper XML 文件</a>
                  </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>动态 SQL</a>
          </li>
                                                                                    
      <li>
  
                          <a href="java-api.html" title="Java API">
          <i class="icon-chevron-right"></i>
        Java API</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="statement-builders.html" title="Statement Builders">
          <i class="icon-chevron-right"></i>
        Statement Builders</a>
                  </li>
                
      <li>
  
                          <a href="logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
                              <li class="nav-header">项目文档</li>
                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-info.html" title="项目信息">
          <i class="icon-chevron-right"></i>
        项目信息</a>
                  </li>
                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="project-reports.html" title="项目报表">
          <i class="icon-chevron-right"></i>
        项目报表</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="构建依靠 Maven" class="poweredBy">
        <img class="builtBy" alt="构建依靠 Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- Copyright 2010-2012 the original author or authors.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. --><!-- version: $Id$ -->

  
  <div class="section">
<h2>&#x52a8;&#x6001; SQL<a name="a_SQL"></a></h2>
  
<p>
MyBatis &#x7684;&#x4e00;&#x4e2a;&#x5f3a;&#x5927;&#x7684;&#x7279;&#x6027;&#x4e4b;&#x4e00;&#x901a;&#x5e38;&#x662f;&#x5b83;&#x7684;&#x52a8;&#x6001; SQL &#x80fd;&#x529b;&#x3002;
&#x5982;&#x679c;&#x4f60;&#x6709;&#x4f7f;&#x7528; JDBC &#x6216;&#x5176;&#x4ed6;
&#x76f8;&#x4f3c;&#x6846;&#x67b6;&#x7684;&#x7ecf;&#x9a8c;,&#x4f60;&#x5c31;&#x660e;&#x767d;&#x6761;&#x4ef6;&#x5730;&#x4e32;&#x8054; SQL &#x5b57;&#x7b26;&#x4e32;&#x5728;&#x4e00;&#x8d77;&#x662f;&#x591a;&#x4e48;&#x7684;&#x75db;&#x82e6;,&#x786e;&#x4fdd;&#x4e0d;&#x80fd;&#x5fd8;&#x4e86;&#x7a7a;
&#x683c;&#x6216;&#x5728;&#x5217;&#x8868;&#x7684;&#x6700;&#x540e;&#x7701;&#x7565;&#x9017;&#x53f7;&#x3002;&#x52a8;&#x6001; SQL &#x53ef;&#x4ee5;&#x5f7b;&#x5e95;&#x5904;&#x7406;&#x8fd9;&#x79cd;&#x75db;&#x82e6;&#x3002;
  </p>
  
<p>
&#x901a;&#x5e38;&#x4f7f;&#x7528;&#x52a8;&#x6001; SQL &#x4e0d;&#x53ef;&#x80fd;&#x662f;&#x72ec;&#x7acb;&#x7684;&#x4e00;&#x90e8;&#x5206;,MyBatis &#x5f53;&#x7136;&#x4f7f;&#x7528;&#x4e00;&#x79cd;&#x5f3a;&#x5927;&#x7684;&#x52a8;&#x6001; SQL &#x8bed;
&#x8a00;&#x6765;&#x6539;&#x8fdb;&#x8fd9;&#x79cd;&#x60c5;&#x5f62;,&#x8fd9;&#x79cd;&#x8bed;&#x8a00;&#x53ef;&#x4ee5;&#x88ab;&#x7528;&#x5728;&#x4efb;&#x610f;&#x6620;&#x5c04;&#x7684; SQL &#x8bed;&#x53e5;&#x4e2d;&#x3002;
  </p>
  
<p>
&#x52a8;&#x6001; SQL &#x5143;&#x7d20;&#x548c;&#x4f7f;&#x7528; JSTL &#x6216;&#x5176;&#x4ed6;&#x76f8;&#x4f3c;&#x7684;&#x57fa;&#x4e8e; XML &#x7684;&#x6587;&#x672c;&#x5904;&#x7406;&#x5668;&#x76f8;&#x4f3c;&#x3002;&#x5728; MyBatis &#x4e4b;
&#x524d;&#x7684;&#x7248;&#x672c;&#x4e2d;,&#x6709;&#x5f88;&#x591a;&#x7684;&#x5143;&#x7d20;&#x9700;&#x8981;&#x6765;&#x4e86;&#x89e3;&#x3002;MyBatis 3 &#x5927;&#x5927;&#x63d0;&#x5347;&#x4e86;&#x5b83;&#x4eec;,&#x73b0;&#x5728;&#x7528;&#x4e0d;&#x5230;&#x539f;&#x5148;&#x4e00;&#x534a;
&#x7684;&#x5143;&#x7d20;&#x5c31;&#x80fd;&#x5de5;&#x4f5c;&#x4e86;&#x3002;MyBatis &#x91c7;&#x7528;&#x529f;&#x80fd;&#x5f3a;&#x5927;&#x7684;&#x57fa;&#x4e8e; OGNL &#x7684;&#x8868;&#x8fbe;&#x5f0f;&#x6765;&#x6d88;&#x9664;&#x5176;&#x4ed6;&#x5143;&#x7d20;&#x3002;
  </p>  
  
<ul>
    
<li>if</li>
    
<li>choose (when, otherwise)</li>
    
<li>trim (where, set)</li>
    
<li>foreach</li>
  </ul>
  <a name="if"></a>
<div class="section" id="if">
<h3>if<a name="if"></a></h3>
  
<p>
&#x5728;&#x52a8;&#x6001; SQL &#x4e2d;&#x6240;&#x505a;&#x7684;&#x6700;&#x901a;&#x7528;&#x7684;&#x4e8b;&#x60c5;&#x662f;&#x5305;&#x542b;&#x90e8;&#x5206; where &#x5b57;&#x53e5;&#x7684;&#x6761;&#x4ef6;&#x3002;&#x6bd4;&#x5982;:
  </p>
  
<div class="source">
<pre>&lt;select id=&quot;findActiveBlogWithTitleLike&quot; 
     resultType=&quot;Blog&quot;&gt;
  SELECT * FROM BLOG 
  WHERE state = &#x2018;ACTIVE&#x2019; 
  &lt;if test=&quot;title != null&quot;&gt;
    AND title like #{title}
  &lt;/if&gt;
&lt;/select&gt;</pre></div>  
  
<p>
&#x8fd9;&#x6761;&#x8bed;&#x53e5;&#x4f1a;&#x63d0;&#x4f9b;&#x4e00;&#x4e2a;&#x53ef;&#x9009;&#x7684;&#x6587;&#x672c;&#x67e5;&#x627e;&#x529f;&#x80fd;&#x3002;&#x5982;&#x679c;&#x4f60;&#x6ca1;&#x6709;&#x4f20;&#x9012; title,&#x90a3;&#x4e48;&#x6240;&#x6709;&#x6fc0;&#x6d3b;&#x7684;&#x535a;&#x5ba2;
&#x90fd;&#x4f1a;&#x88ab;&#x8fd4;&#x56de;&#x3002;&#x4f46;&#x662f;&#x5982;&#x679c;&#x4f60;&#x4f20;&#x9012;&#x4e86; title,&#x90a3;&#x4e48;&#x5c31;&#x4f1a;&#x67e5;&#x627e;&#x76f8;&#x8fd1;&#x7684; title(&#x5bf9;&#x4e8e;&#x654f;&#x9510;&#x7684;&#x68c0;&#x7d22;,&#x8fd9;&#x4e2d;&#x60c5;
&#x51b5;&#x4e0b;&#x4f60;&#x7684;&#x53c2;&#x6570;&#x503c;&#x9700;&#x8981;&#x5305;&#x542b;&#x4efb;&#x610f;&#x7684;&#x906e;&#x63a9;&#x6216;&#x901a;&#x914d;&#x7b26;)&#x7684;&#x535a;&#x5ba2;&#x3002;
  </p>
  
<p>
&#x5047;&#x82e5;&#x6211;&#x4eec;&#x60f3;&#x53ef;&#x9009;&#x5730;&#x641c;&#x7d22; title &#x548c; author &#x5462;?&#x9996;&#x5148;,&#x8981;&#x6539;&#x53d8;&#x8bed;&#x53e5;&#x7684;&#x540d;&#x79f0;&#x8ba9;&#x5b83;&#x6709;&#x610f;&#x4e49;&#x3002;&#x7136;&#x540e;
&#x7b80;&#x5355;&#x52a0;&#x5165;&#x53e6;&#x5916;&#x7684;&#x4e00;&#x4e2a;&#x6761;&#x4ef6;&#x3002;
  </p>
  
<div class="source">
<pre>&lt;select id=&quot;findActiveBlogLike&quot; 
     resultType=&quot;Blog&quot;&gt;
  SELECT * FROM BLOG WHERE state = &#x2018;ACTIVE&#x2019; 
  &lt;if test=&quot;title != null&quot;&gt;
    AND title like #{title}
  &lt;/if&gt;
  &lt;if test=&quot;author != null and author.name != null&quot;&gt;
    AND author_name like #{author.name}
  &lt;/if&gt;
&lt;/select&gt;</pre></div>
  </div>
  <a name="chooseWhenOtherwise"></a>
<div class="section" id="chooseWhenOtherwise">
<h3>choose, when, otherwise<a name="choose_when_otherwise"></a></h3>
  
<p>
&#x6709;&#x65f6;&#x6211;&#x4eec;&#x4e0d;&#x60f3;&#x5e94;&#x7528;&#x6240;&#x6709;&#x7684;&#x6761;&#x4ef6;,
&#x76f8;&#x53cd;&#x6211;&#x4eec;&#x60f3;&#x9009;&#x62e9;&#x5f88;&#x591a;&#x60c5;&#x51b5;&#x4e0b;&#x7684;&#x4e00;&#x79cd;&#x3002; Java &#x4e2d;&#x7684; switch
&#x548c;
&#x8bed;&#x53e5;&#x76f8;&#x4f3c;,MyBatis &#x63d0;&#x4f9b; choose &#x5143;&#x7d20;&#x3002;
  </p>
  
<p>
&#x6211;&#x4eec;&#x4f7f;&#x7528;&#x4e0a;&#x9762;&#x7684;&#x793a;&#x4f8b;,&#x4f46;&#x662f;&#x73b0;&#x5728;&#x6211;&#x4eec;&#x6765;&#x641c;&#x7d22;&#x5f53; title &#x63d0;&#x4f9b;&#x65f6;&#x4ec5;&#x6709; title &#x6761;&#x4ef6;,&#x5f53; author &#x63d0;
&#x4f9b;&#x65f6;&#x4ec5;&#x6709; author &#x6761;&#x4ef6;&#x3002;&#x5982;&#x679c;&#x4e8c;&#x8005;&#x90fd;&#x6ca1;&#x63d0;&#x4f9b;,&#x53ea;&#x8fd4;&#x56de; featured blogs(&#x4e5f;&#x8bb8;&#x662f;&#x7531;&#x7ba1;&#x7406;&#x5458;&#x7b56;&#x7565;&#x5730;&#x9009;
&#x62e9;&#x7684;&#x7ed3;&#x679c;&#x5217;&#x8868;,&#x800c;&#x4e0d;&#x662f;&#x8fd4;&#x56de;&#x5927;&#x91cf;&#x6ca1;&#x6709;&#x610f;&#x4e49;&#x7684;&#x968f;&#x673a;&#x535a;&#x5ba2;&#x7ed3;&#x679c;&#x5217;&#x8868;)&#x3002;
  </p>
  
<div class="source">
<pre>&lt;select id=&quot;findActiveBlogLike&quot; 
     resultType=&quot;Blog&quot;&gt;
  SELECT * FROM BLOG WHERE state = &#x2018;ACTIVE&#x2019;
  &lt;choose&gt;
    &lt;when test=&quot;title != null&quot;&gt;
      AND title like #{title}
    &lt;/when&gt;
    &lt;when test=&quot;author != null and author.name != null&quot;&gt;
      AND author_name like #{author.name}
    &lt;/when&gt;
    &lt;otherwise&gt;
      AND featured = 1
    &lt;/otherwise&gt;
  &lt;/choose&gt;
&lt;/select&gt;</pre></div>
  </div>
  <a name="trimWhereSet"></a>
<div class="section" id="trimWhereSet">
<h3>trim, where, set<a name="trim_where_set"></a></h3>
  
<p>
&#x524d;&#x9762;&#x7684;&#x4f8b;&#x5b50;&#x5df2;&#x7ecf;&#x65b9;&#x4fbf;&#x5730;&#x5904;&#x7406;&#x4e86;&#x4e00;&#x4e2a;&#x81ed;&#x540d;&#x662d;&#x8457;&#x7684;&#x52a8;&#x6001; SQL &#x95ee;&#x9898;&#x3002;&#x8981;&#x8003;&#x8651;&#x6211;&#x4eec;&#x56de;&#x5230;&#x201c;if&#x201d;&#x793a;
&#x4f8b;&#x540e;&#x4f1a;&#x53d1;&#x751f;&#x4ec0;&#x4e48;,&#x4f46;&#x662f;&#x8fd9;&#x6b21;&#x6211;&#x4eec;&#x5c06;&#x201c;ACTIVE = 1&#x201d;&#x4e5f;&#x8bbe;&#x7f6e;&#x6210;&#x52a8;&#x6001;&#x7684;&#x6761;&#x4ef6;&#x3002;
  </p>
  
<div class="source">
<pre>&lt;select id=&quot;findActiveBlogLike&quot; 
     resultType=&quot;Blog&quot;&gt;
  SELECT * FROM BLOG 
  WHERE 
  &lt;if test=&quot;state != null&quot;&gt;
    state = #{state}
  &lt;/if&gt; 
  &lt;if test=&quot;title != null&quot;&gt;
    AND title like #{title}
  &lt;/if&gt;
  &lt;if test=&quot;author != null and author.name != null&quot;&gt;
    AND author_name like #{author.name}
  &lt;/if&gt;
&lt;/select&gt;</pre></div>
  
<p>
&#x5982;&#x679c;&#x8fd9;&#x4e9b;&#x6761;&#x4ef6;&#x90fd;&#x6ca1;&#x6709;&#x5339;&#x914d;&#x4e0a;&#x5c06;&#x4f1a;&#x53d1;&#x751f;&#x4ec0;&#x4e48;?&#x8fd9;&#x6761; SQL &#x7ed3;&#x675f;&#x65f6;&#x5c31;&#x4f1a;&#x6210;&#x8fd9;&#x6837;:
  </p>
  
<div class="source">
<pre>SELECT * FROM BLOG 
WHERE</pre></div>
  
<p>
&#x8fd9;&#x4f1a;&#x5bfc;&#x81f4;&#x67e5;&#x8be2;&#x5931;&#x8d25;&#x3002;&#x5982;&#x679c;&#x4ec5;&#x4ec5;&#x7b2c;&#x4e8c;&#x4e2a;&#x6761;&#x4ef6;&#x5339;&#x914d;&#x662f;&#x4ec0;&#x4e48;&#x6837;&#x7684;?&#x8fd9;&#x6761; SQL &#x7ed3;&#x675f;&#x65f6;&#x5c31;&#x4f1a;&#x662f;&#x8fd9;
&#x6837;:
  </p>
  
<div class="source">
<pre>SELECT * FROM BLOG 
WHERE 
AND title like &#x2018;someTitle&#x2019;</pre></div>
  
<p>
&#x8fd9;&#x4e2a;&#x67e5;&#x8be2;&#x4e5f;&#x4f1a;&#x5931;&#x8d25;&#x3002;&#x8fd9;&#x4e2a;&#x95ee;&#x9898;&#x4e0d;&#x80fd;&#x7b80;&#x5355;&#x7684;&#x7528;&#x6761;&#x4ef6;&#x6765;&#x89e3;&#x51b3;,&#x5982;&#x679c;&#x4f60;&#x4ece;&#x6765;&#x6ca1;&#x6709;&#x8fd9;&#x6837;&#x5199;&#x8fc7;,&#x90a3;
&#x4e48;&#x4f60;&#x4ee5;&#x540e;&#x4e5f;&#x4e0d;&#x4f1a;&#x8fd9;&#x6837;&#x6765;&#x5199;&#x3002;
  </p>
  
<p>
MyBatis &#x6709;&#x4e00;&#x4e2a;&#x7b80;&#x5355;&#x7684;&#x5904;&#x7406;,&#x8fd9;&#x5728; 90%&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#x90fd;&#x4f1a;&#x6709;&#x7528;&#x3002;&#x800c;&#x5728;&#x4e0d;&#x80fd;&#x4f7f;&#x7528;&#x7684;&#x5730;&#x65b9;,&#x4f60;&#x53ef;
&#x4ee5;&#x81ea;&#x5b9a;&#x4e49;&#x5904;&#x7406;&#x65b9;&#x5f0f;&#x3002;&#x52a0;&#x4e0a;&#x4e00;&#x4e2a;&#x7b80;&#x5355;&#x7684;&#x6539;&#x53d8;,&#x6240;&#x6709;&#x4e8b;&#x60c5;&#x90fd;&#x4f1a;&#x987a;&#x5229;&#x8fdb;&#x884c;:
  </p>
  
<div class="source">
<pre>&lt;select id=&quot;findActiveBlogLike&quot; 
     resultType=&quot;Blog&quot;&gt;
  SELECT * FROM BLOG 
  &lt;where&gt; 
    &lt;if test=&quot;state != null&quot;&gt;
         state = #{state}
    &lt;/if&gt; 
    &lt;if test=&quot;title != null&quot;&gt;
        AND title like #{title}
    &lt;/if&gt;
    &lt;if test=&quot;author != null and author.name != null&quot;&gt;
        AND author_name like #{author.name}
    &lt;/if&gt;
  &lt;/where&gt;
&lt;/select&gt;</pre></div> 
  
<p>
where &#x5143;&#x7d20;&#x77e5;&#x9053;&#x5982;&#x679c;&#x7531;&#x88ab;&#x5305;&#x542b;&#x7684;&#x6807;&#x8bb0;&#x8fd4;&#x56de;&#x4efb;&#x610f;&#x5185;&#x5bb9;,&#x5c31;&#x4ec5;&#x4ec5;&#x63d2;&#x5165;&#x201c;WHERE&#x201d;
&#x3002;&#x800c;&#x4e14;,&#x5982;
&#x679c;&#x4ee5;&#x201c;AND&#x201d;&#x6216;&#x201c;OR&#x201d;&#x5f00;&#x5934;&#x7684;&#x5185;&#x5bb9;,&#x90a3;&#x4e48;&#x5c31;&#x4f1a;&#x8df3;&#x8fc7; WHERE &#x4e0d;&#x63d2;&#x5165;&#x3002;
  </p>  
  
<p>
&#x5982;&#x679c; where &#x5143;&#x7d20;&#x6ca1;&#x6709;&#x505a;&#x51fa;&#x4f60;&#x60f3;&#x8981;&#x7684;,&#x4f60;&#x53ef;&#x4ee5;&#x4f7f;&#x7528; trim &#x5143;&#x7d20;&#x6765;&#x81ea;&#x5b9a;&#x4e49;&#x3002;&#x6bd4;&#x5982;,&#x548c; where
&#x5143;&#x7d20;&#x76f8;&#x7b49;&#x7684; trim &#x5143;&#x7d20;&#x662f;:
  </p>
  
<div class="source">
<pre>&lt;trim prefix=&quot;WHERE&quot; prefixOverrides=&quot;AND |OR &quot;&gt;
  ... 
&lt;/trim&gt;</pre></div>  
  
<p>
prefixOverrides &#x5c5e;&#x6027;&#x91c7;&#x7528;&#x7ba1;&#x9053;&#x6587;&#x672c;&#x5206;&#x9694;&#x7b26;&#x6765;&#x8986;&#x76d6;,
&#x8fd9;&#x91cc;&#x7684;&#x7a7a;&#x767d;&#x4e5f;&#x662f;&#x91cd;&#x8981;&#x7684;&#x3002;
&#x5b83;&#x7684;&#x7ed3;&#x679c;&#x5c31;&#x662f;&#x79fb;&#x9664;
&#x5728; prefixOverrides &#x5c5e;&#x6027;&#x4e2d;&#x6307;&#x5b9a;&#x7684;&#x5185;&#x5bb9;,&#x63d2;&#x5165;&#x5728; with &#x5c5e;&#x6027;&#x4e2d;&#x7684;&#x5185;&#x5bb9;&#x3002;
  </p>
  
<p>
&#x548c;&#x52a8;&#x6001;&#x66f4;&#x65b0;&#x8bed;&#x53e5;&#x76f8;&#x4f3c;&#x7684;&#x89e3;&#x51b3;&#x65b9;&#x6848;&#x662f; set&#x3002;set &#x5143;&#x7d20;&#x53ef;&#x4ee5;&#x88ab;&#x7528;&#x4e8e;&#x52a8;&#x6001;&#x5305;&#x542b;&#x66f4;&#x65b0;&#x7684;&#x5217;,&#x800c;&#x4e0d;&#x5305;
&#x542b;&#x4e0d;&#x9700;&#x66f4;&#x65b0;&#x7684;&#x3002;&#x6bd4;&#x5982;:
</p>
  
<div class="source">
<pre>&lt;update id=&quot;updateAuthorIfNecessary&quot;&gt;
  update Author
    &lt;set&gt;
      &lt;if test=&quot;username != null&quot;&gt;username=#{username},&lt;/if&gt;
      &lt;if test=&quot;password != null&quot;&gt;password=#{password},&lt;/if&gt;
      &lt;if test=&quot;email != null&quot;&gt;email=#{email},&lt;/if&gt;
      &lt;if test=&quot;bio != null&quot;&gt;bio=#{bio}&lt;/if&gt;
    &lt;/set&gt;
  where id=#{id}
&lt;/update&gt;</pre></div>
  
<p>
&#x8fd9;&#x91cc;,set &#x5143;&#x7d20;&#x4f1a;&#x52a8;&#x6001;&#x524d;&#x7f6e; SET &#x5173;&#x952e;&#x5b57;,&#x800c;&#x4e14;&#x4e5f;&#x4f1a;&#x6d88;&#x9664;&#x4efb;&#x610f;&#x65e0;&#x5173;&#x7684;&#x9017;&#x53f7;,&#x90a3;&#x4e5f;&#x8bb8;&#x5728;&#x5e94;&#x7528;
&#x6761;&#x4ef6;&#x4e4b;&#x540e;&#x6765;&#x8ddf;&#x8e2a;&#x5b9a;&#x4e49;&#x7684;&#x503c;&#x3002;
  </p>  
  
<p>
&#x5982;&#x679c;&#x4f60;&#x5bf9;&#x548c;&#x8fd9;&#x76f8;&#x7b49;&#x7684; trim &#x5143;&#x7d20;&#x597d;&#x5947;,&#x5b83;&#x770b;&#x8d77;&#x6765;&#x5c31;&#x662f;&#x8fd9;&#x6837;&#x7684;:
  </p>
  
<div class="source">
<pre>&lt;trim prefix=&quot;SET&quot; suffixOverrides=&quot;,&quot;&gt;
  ...
&lt;/trim&gt;</pre></div>
  
<p>
&#x6ce8;&#x610f;&#x8fd9;&#x79cd;&#x60c5;&#x51b5;&#x4e0b;&#x6211;&#x4eec;&#x8986;&#x76d6;&#x4e00;&#x4e2a;&#x540e;&#x7f00;,&#x800c;&#x540c;&#x65f6;&#x4e5f;&#x9644;&#x52a0;&#x524d;&#x7f00;&#x3002;
  </p>
  </div>
  
<div class="section">
<h3>foreach<a name="foreach"></a></h3>
  
<p>
&#x53e6;&#x5916;&#x4e00;&#x4e2a;&#x52a8;&#x6001; SQL &#x901a;&#x7528;&#x7684;&#x5fc5;&#x8981;&#x64cd;&#x4f5c;&#x662f;&#x8fed;&#x4ee3;&#x4e00;&#x4e2a;&#x96c6;&#x5408;,
&#x901a;&#x5e38;&#x662f;&#x6784;&#x5efa;&#x5728; IN &#x6761;&#x4ef6;&#x4e2d;&#x7684;&#x3002;
&#x6bd4;&#x5982;:
  </p>
  
<div class="source">
<pre>&lt;select id=&quot;selectPostIn&quot; resultType=&quot;domain.blog.Post&quot;&gt;
  SELECT *
  FROM POST P
  WHERE ID in
  &lt;foreach item=&quot;item&quot; index=&quot;index&quot; collection=&quot;list&quot;
      open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;
        #{item}
  &lt;/foreach&gt;
&lt;/select&gt;</pre></div>
  
<p>
foreach &#x5143;&#x7d20;&#x662f;&#x975e;&#x5e38;&#x5f3a;&#x5927;&#x7684;,&#x5b83;&#x5141;&#x8bb8;&#x4f60;&#x6307;&#x5b9a;&#x4e00;&#x4e2a;&#x96c6;&#x5408;,&#x58f0;&#x660e;&#x96c6;&#x5408;&#x9879;&#x548c;&#x7d22;&#x5f15;&#x53d8;&#x91cf;,&#x5b83;&#x4eec;&#x53ef;
&#x4ee5;&#x7528;&#x5728;&#x5143;&#x7d20;&#x4f53;&#x5185;&#x3002;&#x5b83;&#x4e5f;&#x5141;&#x8bb8;&#x4f60;&#x6307;&#x5b9a;&#x5f00;&#x653e;&#x548c;&#x5173;&#x95ed;&#x7684;&#x5b57;&#x7b26;&#x4e32;,&#x5728;&#x8fed;&#x4ee3;&#x4e4b;&#x95f4;&#x653e;&#x7f6e;&#x5206;&#x9694;&#x7b26;&#x3002;&#x8fd9;&#x4e2a;&#x5143;&#x7d20;
&#x662f;&#x5f88;&#x667a;&#x80fd;&#x7684;,&#x5b83;&#x4e0d;&#x4f1a;&#x5076;&#x7136;&#x5730;&#x9644;&#x52a0;&#x591a;&#x4f59;&#x7684;&#x5206;&#x9694;&#x7b26;&#x3002;
  </p>
  
<p>
  <span class="label important">&#x6ce8;&#x610f;</span> &#x4f60;&#x53ef;&#x4ee5;&#x4f20;&#x9012;&#x4e00;&#x4e2a; List &#x5b9e;&#x4f8b;&#x6216;&#x8005;&#x6570;&#x7ec4;&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#x5bf9;&#x8c61;&#x4f20;&#x7ed9; MyBatis&#x3002;&#x5f53;&#x4f60;&#x8fd9;&#x4e48;&#x505a;&#x7684;&#x65f6;
&#x5019;,MyBatis &#x4f1a;&#x81ea;&#x52a8;&#x5c06;&#x5b83;&#x5305;&#x88c5;&#x5728;&#x4e00;&#x4e2a; Map &#x4e2d;,&#x7528;&#x540d;&#x79f0;&#x5728;&#x4f5c;&#x4e3a;&#x952e;&#x3002;List &#x5b9e;&#x4f8b;&#x5c06;&#x4f1a;&#x4ee5;&#x201c;list&#x201d;
&#x4f5c;&#x4e3a;&#x952e;,&#x800c;&#x6570;&#x7ec4;&#x5b9e;&#x4f8b;&#x5c06;&#x4f1a;&#x4ee5;&#x201c;array&#x201d;&#x4f5c;&#x4e3a;&#x952e;&#x3002;
  </p>
  
<p>
&#x8fd9;&#x4e2a;&#x90e8;&#x5206;&#x662f;&#x5bf9;&#x5173;&#x4e8e; XML &#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x548c; XML &#x6620;&#x5c04;&#x6587;&#x4ef6;&#x7684;&#x800c;&#x8ba8;&#x8bba;&#x7684;&#x3002;&#x4e0b;&#x4e00;&#x90e8;&#x5206;&#x5c06;&#x8be6;&#x7ec6;&#x8ba8;&#x8bba;
Java API,&#x6240;&#x4ee5;&#x4f60;&#x53ef;&#x4ee5;&#x5f97;&#x5230;&#x4f60;&#x5df2;&#x7ecf;&#x521b;&#x5efa;&#x7684;&#x6700;&#x6709;&#x6548;&#x7684;&#x6620;&#x5c04;&#x3002;
  </p>
  </div>  
  
<div class="section">
<h3>bind<a name="bind"></a></h3>
  
<p>The <tt>bind</tt> element lets you create a variable out of an OGNL expression and bind it to the context. For example:</p>
  
<div class="source">
<pre>
&lt;select id=&quot;selectBlogsLike&quot; resultType=&quot;Blog&quot;&gt;
  &lt;bind name=&quot;pattern&quot; value=&quot;'%' + _parameter.getTitle() + '%'&quot; /&gt;
  SELECT * FROM BLOG
  WHERE title LIKE #{pattern}
&lt;/select&gt;</pre></div>
  </div>
  
<div class="section">
<h3>Multi-db vendor support<a name="Multi-db_vendor_support"></a></h3>
  
<p>If a databaseIdProvider was configured a &quot;_databaseId&quot; variable is available for dynamic code, so you can build different statements depending on database vendor. Have a look at the following example:</p>
  
<div class="source">
<pre>&lt;insert id=&quot;insert&quot;&gt;
  &lt;selectKey keyProperty=&quot;id&quot; resultType=&quot;int&quot; order=&quot;BEFORE&quot;&gt;
    &lt;if test=&quot;_databaseId == 'oracle'&quot;&gt;
      select seq_users.nextval from dual
    &lt;/if&gt;
    &lt;if test=&quot;_databaseId == 'db2'&quot;&gt;
      select nextval for seq_users from sysibm.sysdummy1&quot;
    &lt;/if&gt;
  &lt;/selectKey&gt;
  insert into users values (#{id}, #{name})
&lt;/insert&gt;
</pre></div>
  </div>
  
<div class="section">
<h3>Pluggable Scripting Languages For Dynamic SQL<a name="Pluggable_Scripting_Languages_For_Dynamic_SQL"></a></h3>
    
<p>Starting from version 3.2 MyBatis supports pluggable scripting languages,
    so you can plug a language driver and use that language to write your dynamic
    SQL queries.</p>
    
<p>There are two built-in languages:</p>
    
<ul>
    
<li>xml</li>
    
<li>raw</li>
    </ul>
    
<p>The <tt>xml</tt> language is the default one. It is able to execute all the dynamic tags we saw in the previous sections.</p>
    
<p>The <tt>raw</tt> language is in fact the absence of language. When using this setting MyBatis just performs the 
    parameter substitution and passes the statement to the database driver. As you may guess, the <tt>raw</tt> language 
    is faster than the <tt>xml</tt> language.
    </p>
    
<p>You can specify the language you want to use in an statement adding the <tt>lang</tt> attribute as follows:
    </p>
  
<div class="source">
<pre>&lt;select id=&quot;selectBlog&quot; lang=&quot;raw&quot;&gt;
  SELECT * FROM BLOG
&lt;/select&gt;</pre></div>
    
<p>Or, in the case you are using mappers, using the <tt>@Lang</tt> annotation:</p>
  
<div class="source">
<pre>public interface Mapper {
  @Lang(RawLanguageDriver.class)
  @Select(&quot;SELECT * FROM BLOG&quot;)
  List&lt;Blog&gt; selectBlog();
}</pre></div>
    
<p>You can also implement your own language driver by implementing the following interface:</p>
  
<div class="source">
<pre>public interface LanguageDriver {
  ParameterHandler createParameterHandler(MappedStatement mappedStatement, Object parameterObject, BoundSql boundSql);
  SqlSource createSqlSource(Configuration configuration, XNode script, Class&lt;?&gt; parameterType);
  SqlSource createSqlSource(Configuration configuration, String script, Class&lt;?&gt; parameterType);
}</pre></div>    
	</div>
  </div>
  

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2010&#x2013;2014
                        <a href="http://www.mybatis.org/">MyBatis.org</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
